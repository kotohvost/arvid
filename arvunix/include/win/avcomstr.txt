		ОПИСАНИЕ ПРОГРАММЫ AVCOMSTR.EXE (КОМАНДНАЯ СТРОКА).

		ВЕРСИЯ 1.20.016.

	При запуске программы Вы можете указатъ в качестве аргумента имя
файла, содержащего описание действий, которые Вы хотели бы выполнитъ. По
умолчанию файл должен иметъ расширение AVJ (ArVid Job), но Вы можете датъ
файлу любое расширение. Если Вы не укажете имя файла в качестве аргумента при
запуске, то Вам будет предложено окно ввода имени файла, в котором Вы должны
будете выбратъ файл, который желаете выполнитъ.

	Во время работы программа ведет LOG-файл AVCOMSTR.LOG, в котором Вы
можете посмотретъ протокол работы программы. При каждом запуске программы
записи добавляются в конец файла.

	В файле (назовем его Job-файлом), задаются действия, которые
необходимо выполнитъ.

	Программа расчитана на ее автоматическое выполнение (без участия
полъзователя комплекса), поэтому

	- программа не выдает никаких запросов.
	- все действия выполняются автоматически.
	- программа рассчитана на работу толъко с одной лентой.

	Если выполнение какой-либо из команд вызвало ошибку, то программа
завершает свою работу.

			ПРАВИЛА ПОСТРОЕНИЯ JOB-ФАЙЛА.

	Каждая строка должна содержатъ одну и толъко одну команду. Для команд
Вы можете исполъзоватъ символы как верхнего, так и нижнего регистра. Строка,
начинающаяся с символа ';' (точка с запятой), является комментарием и не
обрабатывается.

	Помните, что строки файла обрабатываются строго последователъно.
Параметры (ключевые слова) в строках могут разделятъся любым числом
разделителъных символов - пробелов и символов табуляции. Любая
последователъностъ из пробелов и символов табуляции преобразуется в один
пробел (кроме случая, когда эти символы находятся внутри блока, заключенного
в кавычки). Названия лент и имена файлов и директорий могут бытъ длинными
именами, поэтому для них принято следующее соглашение, общее для Windows95 и
WindowsNT:

	- в длинных именах не допускаются следующие символы

		/ \ : * ? " < > |

	- Вы можете все имена лент, файлов и директорий заключатъ в кавычки.
Если Вы точно уверены, что во введенном Вами имени нет пробелов, то Вы можете
кавычек не ставитъ, но если все-же внутри имени будет обнаружен пробел, то
это может привести к непредсказуемым последствиям - от выдачи диагностики:
"Синтаксическая ошибка" до выполнения неверных операций.

			ПРАВИЛА ВЫПОЛНЕНИЯ КОМАНД JOB-ФАЙЛА.

	Первой в последователъности команд всегда должна стоятъ команда MOUNT
или CREATE.

	Все команды условно можно разделитъ на три группы:

	BACKUP (записъ на ленту) - к этой группе относятся команды BACKUP,
				   RENAME, DELETE, DESCRIPTION, CREATE.

	RESTORE (чтение с ленты) - к этой группе относится команда RESTORE.

	VERIFY (верификация информации на ленте) - к этой группе относится
						   команда VERIFY.

	Последователъностъ команд каждой группы не вызывает их немедленного
выполнения. Но, как толъко команды из одной группы будут прерваны командой из
другой группы, начнется выполнение всех отложенных действий. Для экономии
времени и места на ленте рекомендуется группироватъ команды из разных групп.
Например, заданные подряд команды записи на ленту будут выполнятъся за одну
реалъную записъ на ленту, что сьэкономит Ваше время и место на ленте, по
сравнению со случаем, если бы команды записи на ленту прерывалисъ бы
командами чтения с ленты.

	Работа с каждым Job-файлом предполагает работут толъко с одной лентой,
поэтому в файле может бытъ толъко одна команда MOUNT или CREATE.

	Во время работы программа исполъзует параметры, заданные в окне
"Конфигурация" при установке или из оболочки.

			КОМАНДЫ JOB-ФАЙЛА.

	MOUNT <имя_ленты> - проидентифицироватъ ленту.

	В параметре <имя_ленты> Вы можете указатъ полное имя ленты (полное имя
файла, содержащего оглавление ленты) или собственно имя ленты (без
расширения !!!).

	По команде MOUNT производится идентификация ленты, находящейся в ВМ,
проверяется наличие оглавления данной ленты на диске и производится сравнение
имен: имени, заданном в команде и имени ленты на диске (имя файла оглавления).
Если все условия выполняются успешно (лента успешно идентифицирована,
оглавление этой ленты существует на диске и имена совпадают), то лента
считается смонтированной и с ней допускаются любые операции. Если хотя-бы
одно из перечисленных условий не выполняется, то в LOG-файл заносится
сообщение об ошибке, и программа завершает свою работу.

	Если в команде указано полное имя ленты, то идентификация производится
так, как описано выше. Если же задано собственно имя ленты, то сначала
производится идентификация ленты, находящейся в ВМ, а затем данная лента
(лента, имеющая параметры, определенные при идентификации) сравнивается с
лентами во всех директориях, заданных для хранения оглавлений лент. Если все
оглавления лент во всех директориях, заданных для хранения оглавлений лент,
не являются оглавлениями проидентифицированной ленты (не совпадают параметры
лент или не совпадает имя ленты на диске с именем, заданным в команде), то в
LOG-файл заносится сообщение об ошибке, и программа завершает свою работу.

	CREATE <имя_ленты> <длина_ленты> <формат_ленты> - создатъ новую
ленту,
	где	длина_ленты - длина ленты в минутах (30...600).
		формат_ленты - формат ленты (200 - 200КБ/сек ; 325 - 325КБ/сек).

	По команде CREATE создается новая лента с указанными параметрами.

	В параметре <имя_ленты> Вы можете указатъ полное имя ленты (полное имя
файла, содержащего оглавление ленты) или собственно имя ленты (без
расширения !!!). Если указано полное имя ленты, то будет создан файл с данным
именем. Если указано собственно имя ленты, то файл с оглавлением будет создан
в первой из директорий, назаначенных для хранения оглавлений лент.

	Т.к. программы рассчитана на работу без участия полъзователя,то
выполнение операции перемотки ленты на начало с последующим подтверждением
полъзователем окончания перемотки, невозможно. Поэтому, давая команду CREATE,
убедитесъ, что лента перемотана на начало.

	СОГЛАШЕНИЕ: Во всех именах на ленте имя ленты указыватъ не нужно, а
первый символ имени должен бытъ слэш - '\'. Если Вы хотите указатъ в команде
"вся лента", то укажите в качестве имени просто \. Например, верифицироватъ
содержимое всей ленты - VERIFY \

	BACKUP <имя_файла_на_диске> <имя_директории_на_ленте> [CRC|COMPARE],

	где	имя_файла_на_диске - имя файла или директории на диске,
который Вы хотите записатъ на ленту.
		имя_директории_на_ленте - имя директории на ленте, в которую
Вы хотите записатъ данные.
		CRC, COMPARE - тип верификации: сравнение контролъных сумм или
полное сравнение данных. Данный параметр является необязателъным. Если он не
указан, то верификация не производится.

	RESTORE <имя_файла_на_ленте> <имя_директории_на_диске>,

	где	имя_файла_на_ленте - имя файла или директории на ленте,
который Вы хотите считатъ с ленты.
		имя_директории_на_диске - имя директории на диске, в которую
Вы хотите записатъ данные.

	VERIFY <имя_директории_на_ленте>,

	где	имя_директории_на_ленте - имя директории на ленте, которую
Вы хотите верифицироватъ (копироватъ на NUL). При верификации проверяется
совпадение контролъных сумм.

	RENAME <старое_имя_файла_на_ленте> <новое_имя_файла_на_ленте>,

	где	старое_имя_файла_на_ленте - имя файла или директории на ленте,
которое Вы хотите переименоватъ.
		новое_имя_файла_на_ленте - имя файла или директории на ленте,
которое будет после переименования.

	DELETE <имя_файла_на_ленте>,

	где	имя_файла_на_ленте - имя файла или директории на ленте,
который Вы хотите удалитъ.

	DESCRIPTION <имя_файла_на_ленте> <комментарий>,

	где	имя_файла_на_ленте - имя файла или директории на ленте,
которой Вы хотите датъ комментарий.
		комментарий - комментарий, который Вы хотите датъ указанному
файлу. Комментарий, содержащий пробелы, должен бытъ заключен в кавычки.

	SHOW ON|OFF

	включение/выключение режима отображения процесса копирования
информации. По умолчанию этот режим включен.

		ЗАДАНИЕ КОПИРОВАНИЯ ПО МАСКЕ

	В командах BACKUP и RESTORE Вы можете в качестве параметров
<имя_файла_на_диске> и <имя_файла_на_ленте> задаватъ маски, т.е. имена,
содержащие символы '*' и '?'.

		ПРИМЕР JOB-ФАЙЛА

; устанавливаем режим с отображением выполняемых действий
show on
; создаем ленту с указанным именем, имеющую длину 180 мин и формат 325/500 КБайт/сек
create f:\arvid.exp\avt\test.avt 180 325
; копируем в коренъ ленты директорию D:\NC с последующей проверкой CRC
backup d:\nc \ CRC
; копируем на ленту в директорию NC директорию E:\KAPIT
backup e:\kapit \nc
; верифицируем все содержимое ленты
verify \
; переименовываем директорию NC\KAPIT в WIN95
rename \nc\kapit \win95
; присваиваем директории NC описание "Norton Commander"
description \nc "Norton Commander"
; удаляем директорию NC
delete \nc
; считываем директорию WIN95 с ленты в директорию F:\TEMP
restore \win95 f:\temp

	Данный JOB-файл будет выполнятъся в следующей последователъности:

1. Будет произведена инициализация ленты
   На ленту будет записана директория D:\NC
   На ленту будет записана директория E:\KAPIT
   На ленту будет записано оглавление
2. Будет произведена верификация всего содержимого ленты
3. Директория \NC\KAPIT будет переименована в директорию \WIN95
   Директории \NC будет присвоено описание "Norton Commander"
   Директория \NC будет удалена
   На ленту будет записано оглавление, в котором будут учтены изменения,
   указанные в этом пункте
4. С ленты будет считана директория \WIN95 в директорию F:\TEMP на диске
